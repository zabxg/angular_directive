<script id="tree_list" type="text/ng-template">
    <ul class="tree-select-list"
        ng-class="{'show':!!tree[treeConfig.entityField].open}"
        ng-mouseover="showTreeNode($event,tree)"
        ng-mouseout="hideTreeNode($event,tree)">
        <li ng-repeat="leaf in tree[treeConfig.childrenField] track by $index"
            title="{{leaf[treeConfig.entityField][treeConfig.textField]}}"
            class="tree-select-cell"
            ng-class="{'active':!!leaf[treeConfig.entityField].open}"
            ng-click="selectNode(leaf)"
            ng-mouseover="showTreeNode($event,tree,leaf)"
            ng-mouseout="hideTreeNode($event,tree,leaf)"
            >{{leaf[treeConfig.entityField][treeConfig.textField]}}</li>
    </ul>
    <div ng-repeat="leaf in tree[treeConfig.childrenField] track by $index"
        ng-include="'tree_list'"
        ng-init="tree=leaf" class="tree-select-list-wrap"
        ng-if="leaf[treeConfig.childrenField]&&leaf[treeConfig.childrenField].length>0"></div>
</script>

<div class="tree-select-container">
    <div class="tree-select-list-wrap first"
        ng-include="'tree_list'"
        ng-if="tree&&tree[treeConfig.childrenField]&&tree[treeConfig.childrenField].length"
        ></div>
</div>